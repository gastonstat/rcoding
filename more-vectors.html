<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 More Vectors | Coding in R</title>
  <meta name="description" content="This is yet another book about programming in the statistical programming R language." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="6 More Vectors | Coding in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is yet another book about programming in the statistical programming R language." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 More Vectors | Coding in R" />
  
  <meta name="twitter:description" content="This is yet another book about programming in the statistical programming R language." />
  

<meta name="author" content="Gaston Sanchez" />


<meta name="date" content="2021-10-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="vectors.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Coding in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#yet-another-r-book"><i class="fa fa-check"></i>Yet Another R Book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#outline"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="part"><span><b>I Getting Started with R and RStudio</b></span></li>
<li class="chapter" data-level="1" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i><b>1</b> Installing R and RStudio</a><ul>
<li class="chapter" data-level="1.1" data-path="install.html"><a href="install.html#interacting-with-r"><i class="fa fa-check"></i><b>1.1</b> Interacting with R</a></li>
<li class="chapter" data-level="1.2" data-path="install.html"><a href="install.html#installing-r"><i class="fa fa-check"></i><b>1.2</b> Installing R</a></li>
<li class="chapter" data-level="1.3" data-path="install.html"><a href="install.html#installing-rstudio"><i class="fa fa-check"></i><b>1.3</b> Installing RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rintro.html"><a href="rintro.html"><i class="fa fa-check"></i><b>2</b> Breaking the Ice with R</a><ul>
<li class="chapter" data-level="2.1" data-path="rintro.html"><a href="rintro.html#first-contact-with-r-via-rstudio"><i class="fa fa-check"></i><b>2.1</b> First Contact with R (via RStudio)</a><ul>
<li class="chapter" data-level="2.1.1" data-path="rintro.html"><a href="rintro.html#r-as-a-scientific-calculator"><i class="fa fa-check"></i><b>2.1.1</b> R as a scientific calculator</a></li>
<li class="chapter" data-level="2.1.2" data-path="rintro.html"><a href="rintro.html#assigning-values-to-objects"><i class="fa fa-check"></i><b>2.1.2</b> Assigning values to objects</a></li>
<li class="chapter" data-level="2.1.3" data-path="rintro.html"><a href="rintro.html#object-names"><i class="fa fa-check"></i><b>2.1.3</b> Object Names</a></li>
<li class="chapter" data-level="2.1.4" data-path="rintro.html"><a href="rintro.html#case-sensitive"><i class="fa fa-check"></i><b>2.1.4</b> Case Sensitive</a></li>
<li class="chapter" data-level="2.1.5" data-path="rintro.html"><a href="rintro.html#calling-functions"><i class="fa fa-check"></i><b>2.1.5</b> Calling Functions</a></li>
<li class="chapter" data-level="2.1.6" data-path="rintro.html"><a href="rintro.html#comments-in-r"><i class="fa fa-check"></i><b>2.1.6</b> Comments in R</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="rintro.html"><a href="rintro.html#help-documentation"><i class="fa fa-check"></i><b>2.2</b> Getting Help</a></li>
<li class="chapter" data-level="2.3" data-path="rintro.html"><a href="rintro.html#installing-packages"><i class="fa fa-check"></i><b>2.3</b> Installing Packages</a></li>
<li class="chapter" data-level="2.4" data-path="rintro.html"><a href="rintro.html#exercises"><i class="fa fa-check"></i><b>2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="rstudio.html"><a href="rstudio.html"><i class="fa fa-check"></i><b>3</b> A Quick Tour Around RStudio</a><ul>
<li class="chapter" data-level="3.1" data-path="rstudio.html"><a href="rstudio.html#first-contact-with-rstudio"><i class="fa fa-check"></i><b>3.1</b> First Contact with RStudio</a></li>
<li class="chapter" data-level="3.2" data-path="rstudio.html"><a href="rstudio.html#rstudio-panes-in-a-nutshell"><i class="fa fa-check"></i><b>3.2</b> RStudio Panes in a Nutshell</a><ul>
<li class="chapter" data-level="3.2.1" data-path="rstudio.html"><a href="rstudio.html#console"><i class="fa fa-check"></i><b>3.2.1</b> Console</a></li>
<li class="chapter" data-level="3.2.2" data-path="rstudio.html"><a href="rstudio.html#files-plots-packages-help"><i class="fa fa-check"></i><b>3.2.2</b> Files, Plots, Packages, Help</a></li>
<li class="chapter" data-level="3.2.3" data-path="rstudio.html"><a href="rstudio.html#source-or-editor"><i class="fa fa-check"></i><b>3.2.3</b> Source or Editor</a></li>
<li class="chapter" data-level="3.2.4" data-path="rstudio.html"><a href="rstudio.html#environment-history-connections"><i class="fa fa-check"></i><b>3.2.4</b> Environment, History, Connections</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="rstudio.html"><a href="rstudio.html#exercises-1"><i class="fa fa-check"></i><b>3.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="session.html"><a href="session.html"><i class="fa fa-check"></i><b>4</b> Session Management</a><ul>
<li class="chapter" data-level="4.1" data-path="session.html"><a href="session.html#starting-a-session"><i class="fa fa-check"></i><b>4.1</b> Starting a Session</a><ul>
<li class="chapter" data-level="4.1.1" data-path="session.html"><a href="session.html#what-happens-when-you-open-an-r-session-via-rstudio"><i class="fa fa-check"></i><b>4.1.1</b> What happens when you open an R session via RStudio?</a></li>
<li class="chapter" data-level="4.1.2" data-path="session.html"><a href="session.html#opening-a-session-for-the-first-time"><i class="fa fa-check"></i><b>4.1.2</b> Opening a session for the first time</a></li>
<li class="chapter" data-level="4.1.3" data-path="session.html"><a href="session.html#working-directory"><i class="fa fa-check"></i><b>4.1.3</b> Working Directory</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="session.html"><a href="session.html#working-during-a-session"><i class="fa fa-check"></i><b>4.2</b> Working During a Session</a><ul>
<li class="chapter" data-level="4.2.1" data-path="session.html"><a href="session.html#working-directory-1"><i class="fa fa-check"></i><b>4.2.1</b> Working Directory</a></li>
<li class="chapter" data-level="4.2.2" data-path="session.html"><a href="session.html#workspace-and-global-environment"><i class="fa fa-check"></i><b>4.2.2</b> Workspace and Global Environment</a></li>
<li class="chapter" data-level="4.2.3" data-path="session.html"><a href="session.html#commands-history"><i class="fa fa-check"></i><b>4.2.3</b> Commands History</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="session.html"><a href="session.html#closing-a-session"><i class="fa fa-check"></i><b>4.3</b> Closing a Session</a></li>
</ul></li>
<li class="part"><span><b>II Data Objects in R</b></span></li>
<li class="chapter" data-level="5" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>5</b> Vectors</a><ul>
<li class="chapter" data-level="5.1" data-path="vectors.html"><a href="vectors.html#motivation-compound-interest"><i class="fa fa-check"></i><b>5.1</b> Motivation: Compound Interest</a><ul>
<li class="chapter" data-level="5.1.1" data-path="vectors.html"><a href="vectors.html#creating-objects"><i class="fa fa-check"></i><b>5.1.1</b> Creating Objects</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="vectors.html"><a href="vectors.html#about-r-vectors"><i class="fa fa-check"></i><b>5.2</b> About R Vectors</a></li>
<li class="chapter" data-level="5.3" data-path="vectors.html"><a href="vectors.html#vectors-are-atomic-objects"><i class="fa fa-check"></i><b>5.3</b> Vectors are Atomic Objects</a><ul>
<li class="chapter" data-level="5.3.1" data-path="vectors.html"><a href="vectors.html#types-and-modes"><i class="fa fa-check"></i><b>5.3.1</b> Types and Modes</a></li>
<li class="chapter" data-level="5.3.2" data-path="vectors.html"><a href="vectors.html#special-values"><i class="fa fa-check"></i><b>5.3.2</b> Special Values</a></li>
<li class="chapter" data-level="5.3.3" data-path="vectors.html"><a href="vectors.html#length-of-vectors"><i class="fa fa-check"></i><b>5.3.3</b> Length of Vectors</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="vectors.html"><a href="vectors.html#coercion"><i class="fa fa-check"></i><b>5.4</b> Coercion</a><ul>
<li class="chapter" data-level="5.4.1" data-path="vectors.html"><a href="vectors.html#implicit-coercion-rules"><i class="fa fa-check"></i><b>5.4.1</b> Implicit Coercion Rules</a></li>
<li class="chapter" data-level="5.4.2" data-path="vectors.html"><a href="vectors.html#explicit-coercion-functions"><i class="fa fa-check"></i><b>5.4.2</b> Explicit Coercion Functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="more-vectors.html"><a href="more-vectors.html"><i class="fa fa-check"></i><b>6</b> More Vectors</a><ul>
<li class="chapter" data-level="6.1" data-path="more-vectors.html"><a href="more-vectors.html#motivation-future-value"><i class="fa fa-check"></i><b>6.1</b> Motivation: Future Value</a></li>
<li class="chapter" data-level="6.2" data-path="more-vectors.html"><a href="more-vectors.html#future-value"><i class="fa fa-check"></i><b>6.2</b> Future Value</a></li>
<li class="chapter" data-level="6.3" data-path="more-vectors.html"><a href="more-vectors.html#vectorization"><i class="fa fa-check"></i><b>6.3</b> Vectorization</a></li>
<li class="chapter" data-level="6.4" data-path="more-vectors.html"><a href="more-vectors.html#recycling"><i class="fa fa-check"></i><b>6.4</b> Recycling</a><ul>
<li class="chapter" data-level="6.4.1" data-path="more-vectors.html"><a href="more-vectors.html#vectorization-and-recycling"><i class="fa fa-check"></i><b>6.4.1</b> Vectorization and Recycling</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://www.gastonsanchez.com" target="blank">Gaston Sanchez</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Coding in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="more-vectors" class="section level1">
<h1><span class="header-section-number">6</span> More Vectors</h1>
<p>In the previous chapter we started the topic of data objects by introducing
vectors and some of its basics concepts. In this chapter we continue the
discussion of vectors, especifically the notions of vectorization, and
recycling.</p>
<div id="motivation-future-value" class="section level2">
<h2><span class="header-section-number">6.1</span> Motivation: Future Value</h2>
<p>Let’s calculate saved amount for a 10 year period</p>
<blockquote>
<p>How much in <strong>ten</strong> years?</p>
</blockquote>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="more-vectors.html#cb1-1"></a><span class="co"># inputs</span></span>
<span id="cb1-2"><a href="more-vectors.html#cb1-2"></a>deposit &lt;-<span class="st"> </span><span class="dv">1000</span></span>
<span id="cb1-3"><a href="more-vectors.html#cb1-3"></a>rate &lt;-<span class="st"> </span><span class="fl">0.02</span></span>
<span id="cb1-4"><a href="more-vectors.html#cb1-4"></a></span>
<span id="cb1-5"><a href="more-vectors.html#cb1-5"></a><span class="co"># amounts at the end of years 1, 2, 3, ..., 10</span></span>
<span id="cb1-6"><a href="more-vectors.html#cb1-6"></a>amount1 =<span class="st"> </span>deposit <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>rate)</span>
<span id="cb1-7"><a href="more-vectors.html#cb1-7"></a>amount2 =<span class="st"> </span>amount1 <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>rate)</span>
<span id="cb1-8"><a href="more-vectors.html#cb1-8"></a>amount3 =<span class="st"> </span>amount2 <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>rate)</span>
<span id="cb1-9"><a href="more-vectors.html#cb1-9"></a>amount4 =<span class="st"> </span>amount3 <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>rate)</span>
<span id="cb1-10"><a href="more-vectors.html#cb1-10"></a>amount5 =<span class="st"> </span>amount4 <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>rate)</span>
<span id="cb1-11"><a href="more-vectors.html#cb1-11"></a>amount6 =<span class="st"> </span>amount5 <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>rate)</span>
<span id="cb1-12"><a href="more-vectors.html#cb1-12"></a>amount7 =<span class="st"> </span>amount6 <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>rate)</span>
<span id="cb1-13"><a href="more-vectors.html#cb1-13"></a>amount8 =<span class="st"> </span>amount7 <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>rate)</span>
<span id="cb1-14"><a href="more-vectors.html#cb1-14"></a>amount9 =<span class="st"> </span>amount8 <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>rate)</span>
<span id="cb1-15"><a href="more-vectors.html#cb1-15"></a>amount10 =<span class="st"> </span>amount8 <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>rate)</span></code></pre></div>
<p>This is too repetitive, time consuming, boring, and error prone (can you spot
the error?)</p>
<p>Let’s do a bit of algebra.</p>
</div>
<div id="future-value" class="section level2">
<h2><span class="header-section-number">6.2</span> Future Value</h2>
<p>In one year you’ll have:</p>
<p><span class="math display">\[
1000 \times (1.02) = 1020
\]</span></p>
<p>In two years you’ll have:</p>
<p><span class="math display">\[
1000 \times (1.02) \times (1.02) = 1000 \times (1.02)^2 = 1040.4
\]</span></p>
<p>In three years you’ll have:</p>
<p><span class="math display">\[
1000 \times (1.02) \times (1.02) \times (1.02) = 1000 \times (1.02)^3 = 1061.208
\]</span></p>
<p>Do you see a pattern?</p>
<p>If you deposit $1,000 at a rate of return <span class="math inline">\(r\)</span>, how much will you have at the
end of year <span class="math inline">\(t\)</span>? The answer is given by the Future Value formula. In its
simplest version, the formula is:</p>
<p><span class="math display">\[
\text{FV} = \text{PV} \times (1 + r)^t
\]</span></p>
<ul>
<li><p><span class="math inline">\(\text{FV}\)</span> = future value (how much you’ll have)</p></li>
<li><p><span class="math inline">\(\text{PV}\)</span> = present value (the initial deposit)</p></li>
<li><p><span class="math inline">\(r\)</span> = rate of return (e.g. annual rate of return)</p></li>
<li><p><span class="math inline">\(t\)</span> = number of periods (e.g. number of years)</p></li>
</ul>
<p>Keep in mind that there are more sophisticated versions of the FV formula.
For now, let’s keep things simple and use the above equation.</p>
<p>If you deposit $1,000 at a rate of 2%, how much will you have at the end of
year 10?</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="more-vectors.html#cb2-1"></a>deposit &lt;-<span class="st"> </span><span class="dv">1000</span></span>
<span id="cb2-2"><a href="more-vectors.html#cb2-2"></a>rate &lt;-<span class="st"> </span><span class="fl">0.02</span></span>
<span id="cb2-3"><a href="more-vectors.html#cb2-3"></a>year &lt;-<span class="st"> </span><span class="dv">10</span></span>
<span id="cb2-4"><a href="more-vectors.html#cb2-4"></a></span>
<span id="cb2-5"><a href="more-vectors.html#cb2-5"></a>amount10 &lt;-<span class="st"> </span>deposit <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>rate)<span class="op">^</span>year</span>
<span id="cb2-6"><a href="more-vectors.html#cb2-6"></a>amount10</span>
<span id="cb2-7"><a href="more-vectors.html#cb2-7"></a><span class="co">#&gt; [1] 1218.994</span></span></code></pre></div>
</div>
<div id="vectorization" class="section level2">
<h2><span class="header-section-number">6.3</span> Vectorization</h2>
<p>At the end of each year you will have:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="more-vectors.html#cb3-1"></a>deposit &lt;-<span class="st"> </span><span class="dv">1000</span></span>
<span id="cb3-2"><a href="more-vectors.html#cb3-2"></a>rate &lt;-<span class="st"> </span><span class="fl">0.02</span></span>
<span id="cb3-3"><a href="more-vectors.html#cb3-3"></a>years &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></span>
<span id="cb3-4"><a href="more-vectors.html#cb3-4"></a></span>
<span id="cb3-5"><a href="more-vectors.html#cb3-5"></a><span class="co"># example of vectorization (or vectorized code)</span></span>
<span id="cb3-6"><a href="more-vectors.html#cb3-6"></a>amounts &lt;-<span class="st"> </span>deposit <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>rate)<span class="op">^</span>years</span>
<span id="cb3-7"><a href="more-vectors.html#cb3-7"></a>amounts</span>
<span id="cb3-8"><a href="more-vectors.html#cb3-8"></a><span class="co">#&gt;  [1] 1020.000 1040.400 1061.208 1082.432 1104.081 1126.162 1148.686 1171.659</span></span>
<span id="cb3-9"><a href="more-vectors.html#cb3-9"></a><span class="co">#&gt;  [9] 1195.093 1218.994</span></span></code></pre></div>
<p>Notice the use of <code>:</code> (“colon”) to generate a numeric sequence vector.</p>
<p>The code in the previous slide to obtain <code>amounts</code> is an example of one of the
most fundamental and powerful kinds of operations (computations) in R, and it
has its special name: <strong>vectorization</strong></p>
<p>When you write code like this:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="more-vectors.html#cb4-1"></a>amounts =<span class="st"> </span>deposit <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>rate)<span class="op">^</span>years</span></code></pre></div>
<p>we say that your code is <strong>vectorized</strong></p>
<p>Simply put, vectorization means that a given function or operation will be
applied to all the elements of one or more vectors, element by element.</p>
<p>Say you want to create a vector <code>log_amounts</code> by taking the logarithm of
<code>amounts</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="more-vectors.html#cb5-1"></a>log_amounts &lt;-<span class="st"> </span><span class="kw">log</span>(amounts)</span></code></pre></div>
<p>When you create the vector <code>log_amounts</code>, what you’re doing is applying a
function to a vector, which in turn acts on all elements of the vector.</p>
<p>This is called <strong>Vectorization</strong> in R parlance. Most functions that operate
with vectors in R are <strong>vectorized</strong> functions. This means that an action
is applied to all elements of the vector without the need to explicitly type
commands to traverse all the elements.</p>
<p>In many other programming languages, you would have to use a set of commands
to loop over each element of a vector (or list of numbers) to transform them.
But not in R.</p>
<p>Another example of vectorization would be the calculation of the square root
of all the amounts:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="more-vectors.html#cb6-1"></a><span class="kw">sqrt</span>(amounts)</span></code></pre></div>
<div id="why-should-you-care-about-vectorization" class="section level4 unnumbered">
<h4>Why should you care about vectorization?</h4>
<p>If you are new to programming, learning about R’s vectorization will be very
natural and you won’t stop to think about it too much. If you have some previous
programming experience in other languages (e.g. C, python, perl), you know
that vectorization does not tend to be a native thing.</p>
<p>Vectorization is essential in R. It saves you from typing many lines of code,
and you will exploit vectorization with other useful functions known as the
<em>apply</em> family functions (we’ll talk about them later in the book).</p>
</div>
</div>
<div id="recycling" class="section level2">
<h2><span class="header-section-number">6.4</span> Recycling</h2>
<p>Closely related with the concept of <em>vectorization</em> we have the notion of
<strong>Recycling</strong>. To explain recycling let’s see an example.</p>
<p>The values in the vector <code>aomunts</code> are given in dollars, but what if you need
to convert them into values expressed in thousands of dollars?. To convert
from dollars to thousands-of-dollars you just need to divide by 1000; for
example</p>
<ul>
<li>1,000 dollars becomes 1 thousands-dollars</li>
<li>10,000 dollars becomes 10 thousands-dollars</li>
<li>1 dollar becomes 0.001 thousands-dollars</li>
</ul>
<p>Here is how to create a new vector <code>thousands</code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="more-vectors.html#cb7-1"></a>thousands &lt;-<span class="st"> </span>amounts <span class="op">/</span><span class="st"> </span><span class="dv">1000</span></span>
<span id="cb7-2"><a href="more-vectors.html#cb7-2"></a>thousands</span>
<span id="cb7-3"><a href="more-vectors.html#cb7-3"></a><span class="co">#&gt;  [1] 1.020000 1.040400 1.061208 1.082432 1.104081 1.126162 1.148686 1.171659</span></span>
<span id="cb7-4"><a href="more-vectors.html#cb7-4"></a><span class="co">#&gt;  [9] 1.195093 1.218994</span></span></code></pre></div>
<p>What you just did (assuming that you did things correctly) is called
<strong>Recycling</strong>, which what R does when you operate with two (or more) vectors
of different length.</p>
<p>To understand this concept, you need to remember that R does not have a data
structure for scalars (single numbers). Scalars are in reality vectors of
length 1.</p>
<p>The conversion from dollars to thousands-of-dollars requires this operation:
<code>amounts / 1000</code>. Although it may not be obvious, we are operating with two
vectors of different length: <code>amounts</code> has 10 elements, whereas <code>1000</code> is a
one-element vector. So how does R know what to do in this case?</p>
<p>Well, R uses the <strong>recycling rule</strong>, which takes the shorter vector (in this
case <code>1000</code>) and recycles its elements to form a temporary vector that matches
the length of the longer vector (i.e. <code>amounts</code>).</p>
<div id="another-recycling-example" class="section level4 unnumbered">
<h4>Another recycling example</h4>
<p>Here’s another example of recycling. Saved amounts of elements in an odd
number position will be divided by two; values of elements in an even
number position will be divided by 10:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="more-vectors.html#cb8-1"></a>units &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">2</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">10</span>)</span>
<span id="cb8-2"><a href="more-vectors.html#cb8-2"></a>new_amounts &lt;-<span class="st"> </span>amounts <span class="op">*</span><span class="st"> </span>units</span>
<span id="cb8-3"><a href="more-vectors.html#cb8-3"></a>new_amounts</span>
<span id="cb8-4"><a href="more-vectors.html#cb8-4"></a><span class="co">#&gt;  [1] 510.0000 104.0400 530.6040 108.2432 552.0404 112.6162 574.3428 117.1659</span></span>
<span id="cb8-5"><a href="more-vectors.html#cb8-5"></a><span class="co">#&gt;  [9] 597.5463 121.8994</span></span></code></pre></div>
<p>The elements of <code>units</code> are recycled (i.e. repeated) as many times as the
number of elements in <code>amounts</code>. The previous command is equivalent to this:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="more-vectors.html#cb9-1"></a>new_units &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">2</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">10</span>), <span class="dt">length.out =</span> <span class="kw">length</span>(amounts))</span>
<span id="cb9-2"><a href="more-vectors.html#cb9-2"></a>amounts <span class="op">*</span><span class="st"> </span>new_units</span>
<span id="cb9-3"><a href="more-vectors.html#cb9-3"></a><span class="co">#&gt;  [1] 510.0000 104.0400 530.6040 108.2432 552.0404 112.6162 574.3428 117.1659</span></span>
<span id="cb9-4"><a href="more-vectors.html#cb9-4"></a><span class="co">#&gt;  [9] 597.5463 121.8994</span></span></code></pre></div>
</div>
<div id="vectorization-and-recycling" class="section level3">
<h3><span class="header-section-number">6.4.1</span> Vectorization and Recycling</h3>
<p>Let’s bring back our vectorization example</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="more-vectors.html#cb10-1"></a>amounts =<span class="st"> </span>deposit <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>rate)<span class="op">^</span>years</span></code></pre></div>
<p>Recall that <code>deposit</code> and <code>rate</code> have length 1. So does the number <code>1</code>, it is
a vector containing just one element. Vector <code>years</code> has 10 elements.</p>
<p>In pictures, we have the following diagram</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-10"></span>
<img src="images/vectors/vectorized1.png" alt="Diagram depicting vectors of different lengths." width="90%" />
<p class="caption">
Figure 6.1: Diagram depicting vectors of different lengths.
</p>
</div>
<p>How does R take care of this?</p>
<p>The following diagram depicts what R does behind the scenes: R recycles the
shorter vectors to match the length of the longest vector. In this example,
vectors <code>deposit</code>, <code>rate</code>, and <code>1</code> are the shorter vectors, which are then
recycle to match the length of the longest vector <code>years</code>. The computation
process is completed with vectorization.</p>
<p><img src="images/vectors/vectorized2.png" width="90%" style="display: block; margin: auto;" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="vectors.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["rcoding.pdf", "rcoding.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
